<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comparison: perf-20260228-164717 vs perf-20260227-203655</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f5f5f5; color: #333; }
    .header { background: #1a1a2e; color: white; padding: 2rem; }
    .header h1 { font-size: 1.5rem; margin-bottom: 0.5rem; }
    .header .meta { color: #aaa; font-size: 0.9rem; }
    .container { max-width: 1600px; margin: 0 auto; padding: 1rem; }
    .summary { background: white; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); display: flex; gap: 2rem; }
    .summary .stat { text-align: center; }
    .summary .stat .value { font-size: 2rem; font-weight: bold; }
    .summary .stat .label { font-size: 0.8rem; color: #666; }
    .filters { background: white; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; display: flex; flex-wrap: wrap; gap: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .filter-group label { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; color: #666; }
    .filter-group select { padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px; }
    table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
    th, td { padding: 0.5rem; text-align: right; border-bottom: 1px solid #eee; }
    th { background: #f8f9fa; font-weight: 600; text-align: left; position: sticky; top: 0; }
    td:first-child { text-align: left; }
    .improved { color: #2d6a4f; background: #d8f3dc; }
    .regressed { color: #9d0208; background: #ffccd5; }
    .neutral { color: #666; }
    .delta { font-weight: bold; font-size: 0.8rem; }
    .table-card { background: white; border-radius: 8px; padding: 1rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); overflow-x: auto; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Performance Comparison Report</h1>
    <div class="meta">Baseline: perf-20260228-164717 | Candidate: perf-20260227-203655</div>
  </div>
  <div class="container">
    <div class="summary" id="summary"></div>
    <div class="filters" id="filters"></div>
    <div class="table-card"><table id="compareTable"></table></div>
  </div>
  <script>
    const DATA = {"run1": "perf-20260228-164717", "run2": "perf-20260227-203655", "common": 20, "only_run1": 0, "only_run2": 13, "rows": [{"pool": "cephfs-rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 31291.0, "read_iops_run2": 31567.0, "read_iops_delta": 0.9, "read_iops_improved": true, "write_iops_run1": 13442.0, "write_iops_run2": 13559.0, "write_iops_delta": 0.9, "write_iops_improved": true, "read_bw_kib_run1": 125170.0, "read_bw_kib_run2": 126276.0, "read_bw_kib_delta": 0.9, "read_bw_kib_improved": true, "write_bw_kib_run1": 53775.0, "write_bw_kib_run2": 54239.0, "write_bw_kib_delta": 0.9, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 2.32, "read_lat_avg_ms_run2": 2.67, "read_lat_avg_ms_delta": 15.1, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 4.09, "write_lat_avg_ms_run2": 3.21, "write_lat_avg_ms_delta": -21.5, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 5.93, "read_lat_p99_ms_run2": 6.78, "read_lat_p99_ms_delta": 14.3, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 8.02, "write_lat_p99_ms_run2": 7.5, "write_lat_p99_ms_delta": -6.5, "write_lat_p99_ms_improved": true}, {"pool": "cephfs-rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 27217.0, "read_iops_run2": 27678.5, "read_iops_delta": 1.7, "read_iops_improved": true, "write_iops_run1": 1946.0, "write_iops_run2": 2299.5, "write_iops_delta": 18.2, "write_iops_improved": true, "read_bw_kib_run1": 108873.0, "read_bw_kib_run2": 110719.0, "read_bw_kib_delta": 1.7, "read_bw_kib_improved": true, "write_bw_kib_run1": 7789.5, "write_bw_kib_run2": 9203.0, "write_bw_kib_delta": 18.1, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.18, "read_lat_avg_ms_run2": 1.16, "read_lat_avg_ms_delta": -1.7, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 16.91, "write_lat_avg_ms_run2": 13.9, "write_lat_avg_ms_delta": -17.8, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 3.0, "read_lat_p99_ms_run2": 2.96, "read_lat_p99_ms_delta": -1.0, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 608.17, "write_lat_p99_ms_run2": 434.11, "write_lat_p99_ms_delta": -28.6, "write_lat_p99_ms_improved": true}, {"pool": "cephfs-rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2166.0, "read_iops_run2": 2251.5, "read_iops_delta": 3.9, "read_iops_improved": true, "write_iops_run1": 464.0, "write_iops_run2": 433.0, "write_iops_delta": -6.7, "write_iops_improved": false, "read_bw_kib_run1": 2219164.0, "read_bw_kib_run2": 2306785.0, "read_bw_kib_delta": 3.9, "read_bw_kib_improved": true, "write_bw_kib_run1": 476284.0, "write_bw_kib_run2": 444699.0, "write_bw_kib_delta": -6.6, "write_bw_kib_improved": false, "read_lat_avg_ms_run1": 14.77, "read_lat_avg_ms_run2": 14.21, "read_lat_avg_ms_delta": -3.8, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 68.92, "write_lat_avg_ms_run2": 73.72, "write_lat_avg_ms_delta": 7.0, "write_lat_avg_ms_improved": false, "read_lat_p99_ms_run1": 50.06, "read_lat_p99_ms_run2": 30.27, "read_lat_p99_ms_delta": -39.5, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 145.75, "write_lat_p99_ms_run2": 141.56, "write_lat_p99_ms_delta": -2.9, "write_lat_p99_ms_improved": true}, {"pool": "cephfs-rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 25673.0, "read_iops_run2": 26408.0, "read_iops_delta": 2.9, "read_iops_improved": true, "write_iops_run1": 11038.0, "write_iops_run2": 11354.0, "write_iops_delta": 2.9, "write_iops_improved": true, "read_bw_kib_run1": 102698.0, "read_bw_kib_run2": 105641.0, "read_bw_kib_delta": 2.9, "read_bw_kib_improved": true, "write_bw_kib_run1": 44158.0, "write_bw_kib_run2": 45421.0, "write_bw_kib_delta": 2.9, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 2.79, "read_lat_avg_ms_run2": 3.19, "read_lat_avg_ms_delta": 14.3, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 5.08, "write_lat_avg_ms_run2": 3.83, "write_lat_avg_ms_delta": -24.6, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 6.78, "read_lat_p99_ms_run2": 7.56, "read_lat_p99_ms_delta": 11.5, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 9.37, "write_lat_p99_ms_run2": 8.45, "write_lat_p99_ms_delta": -9.8, "write_lat_p99_ms_improved": true}, {"pool": "cephfs-rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 26219.5, "read_iops_run2": 20735.5, "read_iops_delta": -20.9, "read_iops_improved": false, "write_iops_run1": 1517.5, "write_iops_run2": 2043.0, "write_iops_delta": 34.6, "write_iops_improved": true, "read_bw_kib_run1": 104882.5, "read_bw_kib_run2": 82947.0, "read_bw_kib_delta": -20.9, "read_bw_kib_improved": false, "write_bw_kib_run1": 6075.0, "write_bw_kib_run2": 8177.5, "write_bw_kib_delta": 34.6, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.22, "read_lat_avg_ms_run2": 1.54, "read_lat_avg_ms_delta": 26.7, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 21.07, "write_lat_avg_ms_run2": 15.99, "write_lat_avg_ms_delta": -24.1, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 3.0, "read_lat_p99_ms_run2": 3.52, "read_lat_p99_ms_delta": 17.5, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 750.78, "write_lat_p99_ms_run2": 442.5, "write_lat_p99_ms_delta": -41.1, "write_lat_p99_ms_improved": true}, {"pool": "cephfs-rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2170.5, "read_iops_run2": 1938.0, "read_iops_delta": -10.7, "read_iops_improved": false, "write_iops_run1": 511.0, "write_iops_run2": 463.5, "write_iops_delta": -9.3, "write_iops_improved": false, "read_bw_kib_run1": 2223722.5, "read_bw_kib_run2": 1986021.0, "read_bw_kib_delta": -10.7, "read_bw_kib_improved": false, "write_bw_kib_run1": 524365.5, "write_bw_kib_run2": 476005.5, "write_bw_kib_delta": -9.2, "write_bw_kib_improved": false, "read_lat_avg_ms_run1": 14.73, "read_lat_avg_ms_run2": 16.5, "read_lat_avg_ms_delta": 12.0, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 62.52, "write_lat_avg_ms_run2": 69.03, "write_lat_avg_ms_delta": 10.4, "write_lat_avg_ms_improved": false, "read_lat_p99_ms_run1": 31.59, "read_lat_p99_ms_run2": 34.87, "read_lat_p99_ms_delta": 10.4, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 135.26, "write_lat_p99_ms_run2": 139.46, "write_lat_p99_ms_delta": 3.1, "write_lat_p99_ms_improved": false}, {"pool": "ec-2-1", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 18177.0, "read_iops_run2": 21957.0, "read_iops_delta": 20.8, "read_iops_improved": true, "write_iops_run1": 7819.0, "write_iops_run2": 9448.0, "write_iops_delta": 20.8, "write_iops_improved": true, "read_bw_kib_run1": 72714.0, "read_bw_kib_run2": 87833.0, "read_bw_kib_delta": 20.8, "read_bw_kib_improved": true, "write_bw_kib_run1": 31283.0, "write_bw_kib_run2": 37797.0, "write_bw_kib_delta": 20.8, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 4.12, "read_lat_avg_ms_run2": 3.61, "read_lat_avg_ms_delta": -12.4, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 6.76, "write_lat_avg_ms_run2": 5.14, "write_lat_avg_ms_delta": -24.0, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 32.63, "read_lat_p99_ms_run2": 33.81, "read_lat_p99_ms_delta": 3.6, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 39.58, "write_lat_p99_ms_run2": 39.05, "write_lat_p99_ms_delta": -1.3, "write_lat_p99_ms_improved": true}, {"pool": "ec-2-1", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 20303.5, "read_iops_run2": 21411.0, "read_iops_delta": 5.5, "read_iops_improved": true, "write_iops_run1": 2690.0, "write_iops_run2": 3118.0, "write_iops_delta": 15.9, "write_iops_improved": true, "read_bw_kib_run1": 81218.5, "read_bw_kib_run2": 85649.5, "read_bw_kib_delta": 5.5, "read_bw_kib_improved": true, "write_bw_kib_run1": 10765.0, "write_bw_kib_run2": 12476.0, "write_bw_kib_delta": 15.9, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.57, "read_lat_avg_ms_run2": 1.49, "read_lat_avg_ms_delta": -5.4, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 11.88, "write_lat_avg_ms_run2": 10.26, "write_lat_avg_ms_delta": -13.7, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 2.8, "read_lat_p99_ms_run2": 2.63, "read_lat_p99_ms_delta": -5.9, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 278.92, "write_lat_p99_ms_run2": 177.21, "write_lat_p99_ms_delta": -36.5, "write_lat_p99_ms_improved": true}, {"pool": "ec-2-1", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 1394.0, "read_iops_run2": 1721.0, "read_iops_delta": 23.5, "read_iops_improved": true, "write_iops_run1": 710.5, "write_iops_run2": 1183.5, "write_iops_delta": 66.6, "write_iops_improved": true, "read_bw_kib_run1": 1428697.0, "read_bw_kib_run2": 1763778.5, "read_bw_kib_delta": 23.5, "read_bw_kib_improved": true, "write_bw_kib_run1": 729003.5, "write_bw_kib_run2": 1213048.0, "write_bw_kib_delta": 66.4, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 22.95, "read_lat_avg_ms_run2": 18.59, "read_lat_avg_ms_delta": -19.0, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 44.91, "write_lat_avg_ms_run2": 27.02, "write_lat_avg_ms_delta": -39.8, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 177.21, "read_lat_p99_ms_run2": 113.77, "read_lat_p99_ms_delta": -35.8, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 530.58, "write_lat_p99_ms_run2": 96.99, "write_lat_p99_ms_delta": -81.7, "write_lat_p99_ms_improved": true}, {"pool": "rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 35129.0, "read_iops_run2": 37480.0, "read_iops_delta": 6.7, "read_iops_improved": true, "write_iops_run1": 15087.0, "write_iops_run2": 16094.0, "write_iops_delta": 6.7, "write_iops_improved": true, "read_bw_kib_run1": 140523.0, "read_bw_kib_run2": 149926.0, "read_bw_kib_delta": 6.7, "read_bw_kib_improved": true, "write_bw_kib_run1": 60354.0, "write_bw_kib_run2": 64380.0, "write_bw_kib_delta": 6.7, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.98, "read_lat_avg_ms_run2": 2.21, "read_lat_avg_ms_delta": 11.6, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 3.85, "write_lat_avg_ms_run2": 2.78, "write_lat_avg_ms_delta": -27.8, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 4.68, "read_lat_p99_ms_run2": 4.22, "read_lat_p99_ms_delta": -9.8, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 6.91, "write_lat_p99_ms_run2": 5.07, "write_lat_p99_ms_delta": -26.6, "write_lat_p99_ms_improved": true}, {"pool": "rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 30010.5, "read_iops_run2": 30517.0, "read_iops_delta": 1.7, "read_iops_improved": true, "write_iops_run1": 4477.5, "write_iops_run2": 5466.0, "write_iops_delta": 22.1, "write_iops_improved": true, "read_bw_kib_run1": 120047.5, "read_bw_kib_run2": 122073.5, "read_bw_kib_delta": 1.7, "read_bw_kib_improved": true, "write_bw_kib_run1": 17915.5, "write_bw_kib_run2": 21868.5, "write_bw_kib_delta": 22.1, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.06, "read_lat_avg_ms_run2": 1.04, "read_lat_avg_ms_delta": -1.9, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 7.14, "write_lat_avg_ms_run2": 5.87, "write_lat_avg_ms_delta": -17.9, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 2.21, "read_lat_p99_ms_run2": 1.66, "read_lat_p99_ms_delta": -24.9, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 154.14, "write_lat_p99_ms_run2": 96.99, "write_lat_p99_ms_delta": -37.1, "write_lat_p99_ms_improved": true}, {"pool": "rep2", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2879.5, "read_iops_run2": 2997.0, "read_iops_delta": 4.1, "read_iops_improved": true, "write_iops_run1": 1068.0, "write_iops_run2": 1153.5, "write_iops_delta": 8.0, "write_iops_improved": true, "read_bw_kib_run1": 2949970.0, "read_bw_kib_run2": 3070029.5, "read_bw_kib_delta": 4.1, "read_bw_kib_improved": true, "write_bw_kib_run1": 1094990.5, "write_bw_kib_run2": 1182628.5, "write_bw_kib_delta": 8.0, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 11.11, "read_lat_avg_ms_run2": 10.67, "read_lat_avg_ms_delta": -3.9, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 29.93, "write_lat_avg_ms_run2": 27.72, "write_lat_avg_ms_delta": -7.4, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 33.81, "read_lat_p99_ms_run2": 32.63, "read_lat_p99_ms_delta": -3.5, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 108.53, "write_lat_p99_ms_run2": 109.58, "write_lat_p99_ms_delta": 1.0, "write_lat_p99_ms_improved": false}, {"pool": "rep3-enc", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 36522.0, "read_iops_run2": 39371.0, "read_iops_delta": 7.8, "read_iops_improved": true, "write_iops_run1": 15684.0, "write_iops_run2": 16912.0, "write_iops_delta": 7.8, "write_iops_improved": true, "read_bw_kib_run1": 146092.0, "read_bw_kib_run2": 157493.0, "read_bw_kib_delta": 7.8, "read_bw_kib_improved": true, "write_bw_kib_run1": 62742.0, "write_bw_kib_run2": 67651.0, "write_bw_kib_delta": 7.8, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.92, "read_lat_avg_ms_run2": 2.33, "read_lat_avg_ms_delta": 21.4, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 3.66, "write_lat_avg_ms_run2": 2.11, "write_lat_avg_ms_delta": -42.3, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 4.22, "read_lat_p99_ms_run2": 4.55, "read_lat_p99_ms_delta": 7.8, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 6.32, "write_lat_p99_ms_run2": 4.81, "write_lat_p99_ms_delta": -23.9, "write_lat_p99_ms_improved": true}, {"pool": "rep3-enc", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 26721.5, "read_iops_run2": 26142.5, "read_iops_delta": -2.2, "read_iops_improved": false, "write_iops_run1": 3809.5, "write_iops_run2": 5208.5, "write_iops_delta": 36.7, "write_iops_improved": true, "read_bw_kib_run1": 106890.5, "read_bw_kib_run2": 104575.0, "read_bw_kib_delta": -2.2, "read_bw_kib_improved": false, "write_bw_kib_run1": 15243.5, "write_bw_kib_run2": 20839.5, "write_bw_kib_delta": 36.7, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.2, "read_lat_avg_ms_run2": 1.22, "read_lat_avg_ms_delta": 2.1, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 8.39, "write_lat_avg_ms_run2": 6.16, "write_lat_avg_ms_delta": -26.6, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 2.24, "read_lat_p99_ms_run2": 1.93, "read_lat_p99_ms_delta": -14.1, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 193.99, "write_lat_p99_ms_run2": 106.43, "write_lat_p99_ms_delta": -45.1, "write_lat_p99_ms_improved": true}, {"pool": "rep3-enc", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2264.0, "read_iops_run2": 2124.0, "read_iops_delta": -6.2, "read_iops_improved": false, "write_iops_run1": 1229.5, "write_iops_run2": 1210.0, "write_iops_delta": -1.6, "write_iops_improved": false, "read_bw_kib_run1": 2319400.0, "read_bw_kib_run2": 2176196.0, "read_bw_kib_delta": -6.2, "read_bw_kib_improved": false, "write_bw_kib_run1": 1260537.0, "write_bw_kib_run2": 1240322.0, "write_bw_kib_delta": -1.6, "write_bw_kib_improved": false, "read_lat_avg_ms_run1": 14.12, "read_lat_avg_ms_run2": 15.06, "read_lat_avg_ms_delta": 6.6, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 26.02, "write_lat_avg_ms_run2": 26.43, "write_lat_avg_ms_delta": 1.6, "write_lat_avg_ms_improved": false, "read_lat_p99_ms_run1": 38.53, "read_lat_p99_ms_run2": 40.1, "read_lat_p99_ms_delta": 4.1, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 111.67, "write_lat_p99_ms_run2": 109.58, "write_lat_p99_ms_delta": -1.9, "write_lat_p99_ms_improved": true}, {"pool": "rep3-virt", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 32973.0, "read_iops_run2": 34024.0, "read_iops_delta": 3.2, "read_iops_improved": true, "write_iops_run1": 14165.0, "write_iops_run2": 14617.0, "write_iops_delta": 3.2, "write_iops_improved": true, "read_bw_kib_run1": 131898.0, "read_bw_kib_run2": 136101.0, "read_bw_kib_delta": 3.2, "read_bw_kib_improved": true, "write_bw_kib_run1": 56664.0, "write_bw_kib_run2": 58471.0, "write_bw_kib_delta": 3.2, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.98, "read_lat_avg_ms_run2": 2.4, "read_lat_avg_ms_delta": 21.2, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 4.4, "write_lat_avg_ms_run2": 3.15, "write_lat_avg_ms_delta": -28.4, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 4.55, "read_lat_p99_ms_run2": 4.68, "read_lat_p99_ms_delta": 2.9, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 7.37, "write_lat_p99_ms_run2": 5.93, "write_lat_p99_ms_delta": -19.5, "write_lat_p99_ms_improved": true}, {"pool": "rep3-virt", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2592.5, "read_iops_run2": 2661.5, "read_iops_delta": 2.7, "read_iops_improved": true, "write_iops_run1": 1214.5, "write_iops_run2": 1135.5, "write_iops_delta": -6.5, "write_iops_improved": false, "read_bw_kib_run1": 2656219.5, "read_bw_kib_run2": 2726939.0, "read_bw_kib_delta": 2.7, "read_bw_kib_improved": true, "write_bw_kib_run1": 1244756.5, "write_bw_kib_run2": 1163854.0, "write_bw_kib_delta": -6.5, "write_bw_kib_improved": false, "read_lat_avg_ms_run1": 12.34, "read_lat_avg_ms_run2": 12.02, "read_lat_avg_ms_delta": -2.6, "read_lat_avg_ms_improved": true, "write_lat_avg_ms_run1": 26.34, "write_lat_avg_ms_run2": 28.17, "write_lat_avg_ms_delta": 6.9, "write_lat_avg_ms_improved": false, "read_lat_p99_ms_run1": 31.59, "read_lat_p99_ms_run2": 33.16, "read_lat_p99_ms_delta": 5.0, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 102.23, "write_lat_p99_ms_run2": 105.38, "write_lat_p99_ms_delta": 3.1, "write_lat_p99_ms_improved": false}, {"pool": "rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "mixed-70-30", "block_size": "4k", "read_iops_run1": 32913.0, "read_iops_run2": 34418.0, "read_iops_delta": 4.6, "read_iops_improved": true, "write_iops_run1": 14139.0, "write_iops_run2": 14785.0, "write_iops_delta": 4.6, "write_iops_improved": true, "read_bw_kib_run1": 131658.0, "read_bw_kib_run2": 137678.0, "read_bw_kib_delta": 4.6, "read_bw_kib_improved": true, "write_bw_kib_run1": 56560.0, "write_bw_kib_run2": 59143.0, "write_bw_kib_delta": 4.6, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.99, "read_lat_avg_ms_run2": 2.37, "read_lat_avg_ms_delta": 19.1, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 4.39, "write_lat_avg_ms_run2": 3.13, "write_lat_avg_ms_delta": -28.7, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 4.55, "read_lat_p99_ms_run2": 4.68, "read_lat_p99_ms_delta": 2.9, "read_lat_p99_ms_improved": false, "write_lat_p99_ms_run1": 7.37, "write_lat_p99_ms_run2": 5.93, "write_lat_p99_ms_delta": -19.5, "write_lat_p99_ms_improved": true}, {"pool": "rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "random-rw", "block_size": "4k", "read_iops_run1": 27920.5, "read_iops_run2": 27111.0, "read_iops_delta": -2.9, "read_iops_improved": false, "write_iops_run1": 3757.5, "write_iops_run2": 5141.0, "write_iops_delta": 36.8, "write_iops_improved": true, "read_bw_kib_run1": 111687.5, "read_bw_kib_run2": 108448.0, "read_bw_kib_delta": -2.9, "read_bw_kib_improved": false, "write_bw_kib_run1": 15035.0, "write_bw_kib_run2": 20569.0, "write_bw_kib_delta": 36.8, "write_bw_kib_improved": true, "read_lat_avg_ms_run1": 1.15, "read_lat_avg_ms_run2": 1.18, "read_lat_avg_ms_delta": 2.6, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 8.55, "write_lat_avg_ms_run2": 6.22, "write_lat_avg_ms_delta": -27.3, "write_lat_avg_ms_improved": true, "read_lat_p99_ms_run1": 2.17, "read_lat_p99_ms_run2": 1.93, "read_lat_p99_ms_delta": -11.5, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 189.79, "write_lat_p99_ms_run2": 104.33, "write_lat_p99_ms_delta": -45.0, "write_lat_p99_ms_improved": true}, {"pool": "rep3", "vm_size": "medium", "pvc_size": "150Gi", "concurrency": "1", "profile": "sequential-rw", "block_size": "1M", "read_iops_run1": 2648.0, "read_iops_run2": 2623.5, "read_iops_delta": -0.9, "read_iops_improved": false, "write_iops_run1": 1333.0, "write_iops_run2": 1182.0, "write_iops_delta": -11.3, "write_iops_improved": false, "read_bw_kib_run1": 2712692.0, "read_bw_kib_run2": 2687778.0, "read_bw_kib_delta": -0.9, "read_bw_kib_improved": false, "write_bw_kib_run1": 1366143.0, "write_bw_kib_run2": 1211779.0, "write_bw_kib_delta": -11.3, "write_bw_kib_improved": false, "read_lat_avg_ms_run1": 12.08, "read_lat_avg_ms_run2": 12.19, "read_lat_avg_ms_delta": 0.9, "read_lat_avg_ms_improved": false, "write_lat_avg_ms_run1": 24.0, "write_lat_avg_ms_run2": 27.05, "write_lat_avg_ms_delta": 12.7, "write_lat_avg_ms_improved": false, "read_lat_p99_ms_run1": 35.38, "read_lat_p99_ms_run2": 32.63, "read_lat_p99_ms_delta": -7.8, "read_lat_p99_ms_improved": true, "write_lat_p99_ms_run1": 85.45, "write_lat_p99_ms_run2": 103.28, "write_lat_p99_ms_delta": 20.9, "write_lat_p99_ms_improved": false}], "metrics": [{"key": "read_iops", "label": "Read IOPS", "higher_better": true}, {"key": "write_iops", "label": "Write IOPS", "higher_better": true}, {"key": "read_bw_kib", "label": "Read BW (KiB/s)", "higher_better": true}, {"key": "write_bw_kib", "label": "Write BW (KiB/s)", "higher_better": true}, {"key": "read_lat_avg_ms", "label": "Read Lat (ms)", "higher_better": false}, {"key": "write_lat_avg_ms", "label": "Write Lat (ms)", "higher_better": false}, {"key": "read_lat_p99_ms", "label": "Read p99 (ms)", "higher_better": false}, {"key": "write_lat_p99_ms", "label": "Write p99 (ms)", "higher_better": false}]};
    const rows = DATA.rows;
    const metrics = DATA.metrics;

    // Summary
    const summaryDiv = document.getElementById('summary');
    let improved = 0, regressed = 0, unchanged = 0;
    rows.forEach(r => {
      metrics.forEach(m => {
        const d = r[m.key + '_delta'];
        if (Math.abs(d) < 1) unchanged++;
        else if (r[m.key + '_improved']) improved++;
        else regressed++;
      });
    });
    summaryDiv.innerHTML =
      '<div class="stat"><div class="value">' + DATA.common + '</div><div class="label">Common Tests</div></div>' +
      '<div class="stat"><div class="value" style="color:#2d6a4f">' + improved + '</div><div class="label">Improvements</div></div>' +
      '<div class="stat"><div class="value" style="color:#9d0208">' + regressed + '</div><div class="label">Regressions</div></div>' +
      '<div class="stat"><div class="value" style="color:#666">' + unchanged + '</div><div class="label">Unchanged (&lt;1%)</div></div>' +
      '<div class="stat"><div class="value">' + DATA.only_run1 + '</div><div class="label">Only in ' + DATA.run1 + '</div></div>' +
      '<div class="stat"><div class="value">' + DATA.only_run2 + '</div><div class="label">Only in ' + DATA.run2 + '</div></div>';

    // Filters
    const unique = (key) => [...new Set(rows.map(r => r[key]))].sort();
    const filtersDiv = document.getElementById('filters');
    ['pool', 'vm_size', 'pvc_size', 'profile', 'block_size'].forEach(key => {
      const group = document.createElement('div');
      group.className = 'filter-group';
      group.innerHTML = '<label>' + key + '</label><br><select id="f-' + key + '"><option value="all">All</option>' +
        unique(key).map(v => '<option value="' + v + '">' + v + '</option>').join('') + '</select>';
      filtersDiv.appendChild(group);
      group.querySelector('select').addEventListener('change', render);
    });

    function render() {
      const filters = {};
      ['pool', 'vm_size', 'pvc_size', 'profile', 'block_size'].forEach(k => {
        filters[k] = document.getElementById('f-' + k).value;
      });
      const filtered = rows.filter(r =>
        Object.entries(filters).every(([k, v]) => v === 'all' || r[k] === v)
      );

      let html = '<thead><tr><th>Pool</th><th>VM</th><th>PVC</th><th>Conc</th><th>Profile</th><th>BS</th>';
      metrics.forEach(m => {
        html += '<th colspan="3">' + m.label + '</th>';
      });
      html += '</tr><tr><th colspan="6"></th>';
      metrics.forEach(() => {
        html += '<th>' + DATA.run1.replace(/^perf-/, '') + '</th><th>' + DATA.run2.replace(/^perf-/, '') + '</th><th>Delta</th>';
      });
      html += '</tr></thead><tbody>';

      filtered.forEach(r => {
        html += '<tr><td>' + r.pool + '</td><td>' + r.vm_size + '</td><td>' + r.pvc_size +
          '</td><td>' + r.concurrency + '</td><td>' + r.profile + '</td><td>' + r.block_size + '</td>';
        metrics.forEach(m => {
          const v1 = r[m.key + '_run1'];
          const v2 = r[m.key + '_run2'];
          const delta = r[m.key + '_delta'];
          const imp = r[m.key + '_improved'];
          const cls = Math.abs(delta) < 1 ? 'neutral' : (imp ? 'improved' : 'regressed');
          const sign = delta > 0 ? '+' : '';
          html += '<td>' + v1 + '</td><td>' + v2 + '</td><td class="' + cls + ' delta">' + sign + delta + '%</td>';
        });
        html += '</tr>';
      });
      html += '</tbody>';
      document.getElementById('compareTable').innerHTML = html;
    }
    render();
  </script>
</body>
</html>
